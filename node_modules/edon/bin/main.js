#!/usr/bin/env node

var http = require('http');
var httpProxy = require('http-proxy');
var Edon = require('../lib/edon').Edon;

/* CONSTANTS */
var HOST = 'localhost';
var PORT = 9000;
var PROXY_PORT = 8000;

httpProxy.createServer(
  new Edon(function(json) {
    json.fox = 'frakakakaw';
  }),
  PORT,
  HOST
).listen(PROXY_PORT);

http.createServer(
  function(req, res) {
    res.writeHead(200, { 'Content-Type': 'text/json' });
    res.write(JSON.stringify({
      'cow': 'moo',
      'duck': 'quack',
      'fox': '???'
    }));
    res.end();
  }
).listen(PORT);
