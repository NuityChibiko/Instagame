<%- include("patials/header") %>

้<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>allNews</title>
    <link rel="stylesheet" href="/css/all_news.css">
    <script src="./js/load_more.js"></script>
</head>
<body>

  <section class="highlight">
    <header class="hero__top d-none d-lg-block">
      <div class="hero__header">
        <h1>ข่าวเกม <span><% if(category){ %>
          <%= category %>
          <% } %>ทั้งหมด</span></h1>
      </div>
      <nav class="breadcrumb-box" aria-label="breadcrumb">
        <ol class="breadcrumbs bg-dark">
            <li class="breadcrumb-item breadcrumb-section">
                <a href="/"><i class="fas fa-home"></i></a>
            </li>
            <li class="breadcrumb-item breadcrumb-section active">
                <a href="#">ข่าวเกม</a>
            </li>
            <li class="breadcrumb-item breadcrumb-section active">
              <a href="#"><%= category %></a>
          </li>
        </ol>
    </nav>
    </header>
  
    <div id="main-highlight" class="hightlight-box">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <a href="#">
              <img src="/image/slide1.JPG" class="d-block w-100" >
              <div class="carousel-caption d-sm-block">
                <h4>ใส่พาดหัวข่าว</h4>
                <p>ใส่ description สั้นๆของข่าว</p>
              </div>
            </a>
          </div>
          <div class="carousel-item">
            <a href="#">
              <img src="/image/slide2.JPG" class="d-block w-100" >
              <div class="carousel-caption d-sm-block">
                <h4>ใส่พาดหัวข่าว</h4>
                <p>ใส่ description สั้นๆของข่าว</p>
              </div>
            </a>
          </div>
          <div class="carousel-item">
            <a href="#">
              <img src="/image/slide3.JPG" class="d-block w-100" >
              <div class="carousel-caption d-sm-block">
                <h4>ใส่พาดหัวข่าว</h4>
                <p>ใส่ description สั้นๆของข่าว</p>
              </div>
            </a>
          </div>
          <div class="carousel-item">
            <a href="#">
              <img src="/image/slide4.JPG" class="d-block w-100" >
              <div class="carousel-caption d-sm-block">
                <h4>ใส่พาดหัวข่าว</h4>
                <p>ใส่ description สั้นๆของข่าว</p>
              </div>
            </a>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
  </section>    
  
    <main class="news-body" role="news"> 
        <div id="news-section" style="position: relative;">
          <header class="headline headline-sticky">
            <div class="dropdown">
              <button class="categoly-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                เลือกดูข่าวตามประเภทเกม
                <i class="fas fa-gamepad"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-style" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="/news">จากเกมทุกประเภท</a>
                <a class="dropdown-item" href="/news/category/Survival">Survival</a>
                <a class="dropdown-item" href="/news/category/RPG">Role-Player Game (RPG)</a>
                <a class="dropdown-item" href="/news/category/Battle_Royal">Battle Royale</a>
                <a class="dropdown-item" href="/news/category/FPS">First Person Shooter (FPS)</a>
                <a class="dropdown-item" href="/news/category/MOBA">Multiplayer Online Battle Arena (MOBA)</a>
                <a class="dropdown-item" href="/news/category/Fighting">Fighting</a>
                <a class="dropdown-item" href="/news/category/Sports">Sports</a>
                <a class="dropdown-item" href="/news/category/Racing">Racing</a>
              </div>
            </div>
            <% if(currentUser && (currentUser.class === "Noble"|| currentUser.class === "King")){ %>
            <button class="create_team-icon" onclick="window.location.href='/news/create';">
              <i class="far fa-file"></i>
              <span>สร้างข่าว</span> 
          </button>
          <% } %>
          </header>

          <section class="box">
                  <div class="row" style="display:flex; flex-wrap:wrap;">
                    <% News.forEach(function(news){ %>
                    <div class="col-lg-3 col-6" >
                      <article class="entry" style="display: none;">
                        <figure class="entry__thumb entry__thumb--zoom">
                          <a href="/news/<%= news._id %>">
                            <img style="width:  200px; height: 100px; object-fit: cover;" src=<%= '/uploads/news/' + news.image %> class="card-img-top">
                          </a>
                        </figure>
                        <div class="entry__body">
                          <h4 class="entry__title">
                            <a href="/news/<%= news._id %>">
                              <%= news.head %>
                            </a>
                          </h4>
                          <div class="entry__meta">
                            <span class="entry__meta__count">
                              <i class="fas fa-eye"></i>
                              <%= news.viewers %>
                            </span>
                            <span class="entry__meta__posted">
                              <i class="far fa-clock"></i>
                              <%= moment(news.date).format("DD/MM/YYYY") %>
                            </span>
                          </div>
                        </div>
                      </article>
                    </div>
                <% }); %> 
              </div>
              <header class="add-view">
                <button id="loadMore" class="scrollto-add">
                  โหลดเพิ่ม
                  <i class="fas fa-plus"></i>
                </button>
              </header>
              <p class="totop" style="position: fixed;
         bottom: 10px;
         right: 20px;"> 
          <a href="#top" style="display: none;">Back to top</a> 
        </p>
         </section>
        </div>
    </main>
</body>
</html>

<%- include("patials/footer") %>

<script>
  $(function () {
    $("article").slice(0, 4).show();
    $("#loadMore").on('click', function (e) {
        e.preventDefault();
        $("article:hidden").slice(0, 4).slideDown();
        if ($("article:hidden").length == 0) {
            $("#load").fadeOut('slow');
        }
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 1500);
    });
});

$('a[href=#top]').click(function () {
    $('body,html').animate({
        scrollTop: 0
    }, 600);
    return false;
});

$(window).scroll(function () {
    if ($(this).scrollTop() > 50) {
        $('.totop a').fadeIn();
    } else {
        $('.totop a').fadeOut();
    }
});
</script>

